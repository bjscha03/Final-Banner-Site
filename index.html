
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Banners On The Fly - Professional Banners • Free Next-Day Air • 24-Hour Production</title>
    <meta name="description" content="Professional vinyl banners with free next-day air shipping and 24-hour production. Design custom banners online with live preview." />
    <link rel="icon" type="image/svg+xml" href="/placeholder.svg" />

    <meta property="og:title" content="Banners On The Fly - Professional Banners • Free Next-Day Air • 24-Hour Production" />
    <meta property="og:description" content="Professional vinyl banners with free next-day air shipping and 24-hour production. Design custom banners online with live preview." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="/og.jpg" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:image" content="/og.jpg" />
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>

    <!-- Banners On The Fly Chatbot Widget -->
    <script>
(() => {
/* =========================
   Banners On The Fly — Chatbot Widget
   Zero-deps, auto replies, contact fallback
   ========================= */

const CONFIG = {
  brandName: "Banners On The Fly",
  brandColor: "#005EFF",
  contactUrl: "/contact",           // React Router contact page
  designUrl: "/design",             // React Router design tool page
  smsNumber: "+15026324108",        // SMS fallback number
  supportEmail: "support@bannersonthefly.com",
  taxRate: 0.06,                    // 6% tax rate (matches your pricing.ts)
  pricingSqft: {                    // $/sqft (matches your PRICE_PER_SQFT)
    "13oz Vinyl": 4.50,
    "15oz Vinyl": 6.00,
    "18oz Vinyl": 7.50,
    "Mesh Vinyl": 6.00
  },
  grommetsIncluded: true,
  productionCopy: "24-hour production + Free Next-Day Air",
};

// ---------- DOM helpers ----------
function el(tag, props={}, ...children){
  const node = document.createElement(tag);
  Object.entries(props).forEach(([k,v])=>{
    if (k === "style") Object.assign(node.style, v);
    else if (k.startsWith("on") && typeof v === "function") node.addEventListener(k.slice(2).toLowerCase(), v);
    else if (k === "class") node.className = v;
    else node.setAttribute(k, v);
  });
  children.forEach(c => {
    if (c == null) return;
    if (typeof c === "string") node.appendChild(document.createTextNode(c));
    else node.appendChild(c);
  });
  return node;
}
function money(n){ return `$${n.toFixed(2)}`; }
function toInt(v){ const n = parseInt(String(v).replace(/[^\d]/g,""),10); return isNaN(n)?0:n; }
function toNum(v){ const n = parseFloat(String(v).replace(/[^\d.]/g,"")); return isNaN(n)?0:n; }
function scrollToBottom(){ setTimeout(()=> { chatBody.scrollTop = chatBody.scrollHeight; }, 10); }
function openContact(prefill){
  const qs = new URLSearchParams({ from:"chatbot", message: prefill || "" }).toString();
  window.open(`${CONFIG.contactUrl}?${qs}`, "_blank", "noopener");
}
function smsHref(text){
  const body = encodeURIComponent(text || "Hi Banners on the Fly, I need help.");
  return `sms:${CONFIG.smsNumber}?body=${body}`;
}

// ---------- Widget Shell ----------
const style = el("style", {}, `
  .botf-chat-root{ position:fixed; right:12px; bottom:12px; z-index:2147483647; font-family: ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; }
  .botf-bubble{ width:56px; height:56px; border-radius:50%; display:flex; align-items:center; justify-content:center; color:#fff; cursor:pointer; box-shadow:0 8px 20px rgba(0,0,0,.25); transition:.2s transform; }
  .botf-bubble:hover{ transform: translateY(-1px); }
  .botf-panel{ width:360px; max-height:600px; background:#fff; border-radius:16px; overflow:hidden; box-shadow:0 20px 40px rgba(0,0,0,.25); display:none; flex-direction:column; position:relative; }
  .botf-header{ background:${CONFIG.brandColor}; color:#fff; padding:14px 16px; font-weight:600; display:flex; align-items:center; justify-content:space-between; flex-shrink:0; }
  .botf-title{ font-size:15px; }
  .botf-close{ background:transparent; border:none; color:#fff; font-size:20px; cursor:pointer; opacity:.85; padding:4px; line-height:1; }
  .botf-close:hover{ opacity:1; }
  .botf-body{ padding:12px; overflow-y:auto; flex:1; background:#F7FAFF; min-height:300px; max-height:450px; }
  .botf-input{ display:flex; gap:8px; padding:12px; border-top:1px solid #e9eefc; background:#fff; flex-shrink:0; }
  .botf-input input{ flex:1; border-radius:10px; border:1px solid #d7def3; padding:10px 12px; font-size:14px; outline:none; min-width:0; }
  .botf-input button{ background:${CONFIG.brandColor}; color:#fff; border:none; padding:10px 14px; border-radius:10px; cursor:pointer; font-weight:600; white-space:nowrap; }
  .botf-msg{ display:flex; margin:8px 0; }
  .botf-bot{ justify-content:flex-start; }
  .botf-user{ justify-content:flex-end; }
  .botf-bubble-msg{ max-width:85%; padding:10px 14px; border-radius:12px; font-size:14px; line-height:1.4; word-wrap:break-word; }
  .botf-bot .botf-bubble-msg{ background:#fff; border:1px solid #e6ecfe; }
  .botf-user .botf-bubble-msg{ background:${CONFIG.brandColor}; color:#fff; }
  .botf-buttons{ display:flex; flex-wrap:wrap; gap:6px; margin-top:8px; }
  .botf-btn{ border:1px solid #c7d3ff; background:#fff; color:#1f2a62; padding:8px 12px; border-radius:20px; font-size:13px; cursor:pointer; transition:all 0.2s; white-space:nowrap; }
  .botf-btn:hover{ background:#f0f4ff; border-color:#a5b4fc; }
  .botf-section{ background:#fff; border:1px solid #e6ecfe; padding:12px; border-radius:12px; margin-top:8px; }
  .botf-mini{ font-size:12px; color:#667; margin-top:6px; line-height:1.3; }
  .botf-cta{ border:none; background:${CONFIG.brandColor}; color:#fff; padding:10px 14px; border-radius:10px; font-weight:600; cursor:pointer; transition:all 0.2s; }
  .botf-cta:hover{ background:#0052e6; }
  .botf-row{ display:flex; gap:8px; margin-bottom:8px; }
  .botf-row input, .botf-row select{ flex:1; border-radius:8px; border:1px solid #d7def3; padding:10px 12px; font-size:14px; min-width:0; }
  .botf-footer-note{ font-size:11px; color:#556; opacity:.9; margin-top:8px; line-height:1.3; }

  /* Mobile Responsive */
  @media (max-width:480px){
    .botf-chat-root{ right:8px; bottom:8px; }
    .botf-panel{
      width:calc(100vw - 16px);
      height:calc(100vh - 100px);
      max-height:none;
      max-width:none;
      position:fixed;
      top:50px;
      right:8px;
      left:8px;
      margin:0 auto;
    }
    .botf-body{
      max-height:none;
      flex:1;
      min-height:200px;
    }
    .botf-bubble-msg{ max-width:90%; }
    .botf-buttons{ gap:4px; }
    .botf-btn{ padding:6px 10px; font-size:12px; }
    .botf-row{ flex-direction:column; gap:6px; }
    .botf-row input, .botf-row select{ width:100%; }
  }

  /* Tablet */
  @media (max-width:768px) and (min-width:481px){
    .botf-panel{
      width:calc(100vw - 40px);
      max-width:400px;
      height:calc(100vh - 120px);
      max-height:600px;
    }
  }
`);
document.head.appendChild(style);

const root = el("div",{class:"botf-chat-root","aria-live":"polite"});
const bubble = el("button",{class:"botf-bubble",style:{background:CONFIG.brandColor}, "aria-label":"Open chat"},
  el("span", {style:{fontSize:"22px"}}, "💬")
);
const panel = el("div",{class:"botf-panel","role":"dialog","aria-label":`${CONFIG.brandName} Chatbot`});
const header = el("div",{class:"botf-header"},
  el("div",{class:"botf-title"}, `${CONFIG.brandName} — Live Assistant`),
  el("button",{class:"botf-close",onClick:() => { panel.style.display="none"; bubble.style.display="flex"; }}, "×")
);
const chatBody = el("div",{class:"botf-body"});
const chatInput = el("input",{
  type:"text",
  placeholder:"Type here… (we'll route to Contact if not a menu option)",
  "aria-label":"chat input",
  onKeyDown:(e) => {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      handleFreeText();
    }
  }
});

const inputBar = el("div",{class:"botf-input"},
  chatInput,
  el("button",{onClick:handleFreeText}, "Send")
);
panel.append(header,chatBody,inputBar);
root.append(panel,bubble);
document.body.appendChild(root);
bubble.addEventListener("click", () => { bubble.style.display="none"; panel.style.display="flex"; welcome(); });

// ---------- Chat primitives ----------
function addMsg(text, who="bot", extra){
  const row = el("div",{class:`botf-msg botf-${who}`});
  const bubble = el("div",{class:"botf-bubble-msg"});
  if (typeof text === "string") bubble.append(text);
  else bubble.append(text); // Node
  if (extra) bubble.append(extra);
  row.append(bubble);
  chatBody.append(row);
  scrollToBottom();
  return row;
}
function addButtons(buttons){
  const wrap = el("div",{class:"botf-buttons"});
  buttons.forEach(btn=>{
    const b = el("button",{class:"botf-btn",onClick:btn.onClick}, btn.label);
    wrap.append(b);
  });
  chatBody.append(wrap);
  scrollToBottom();
  return wrap;
}
function handleFreeText(){
  const input = inputBar.querySelector("input");
  const text = input.value.trim();
  if(!text) return;
  addMsg(text, "user");
  input.value = "";
  // No NLP—auto route to contact
  addMsg("Thanks! I'll connect you with our support team who can help with your specific question.");

  // Add quick action buttons
  addButtons([
    {label:"Go to Contact Page", onClick:()=> openContact(`User question: ${text}`)},
    {label:"Back to Menu", onClick:welcome}
  ]);
}

// ---------- Flows ----------
function welcome(){
  chatBody.innerHTML = "";
  addMsg(`👋 Hi! How can we help today? We print **professional vinyl banners** with **${CONFIG.productionCopy}**.`);

  addButtons([
    {label:"Get a Quick Quote", onClick:quoteStart},
    {label:"Design Help / File Check", onClick:designHelp},
    {label:"Order Status", onClick:orderStatus},
    {label:"Payment / Checkout", onClick:paymentHelp},
    {label:"Bulk / Reseller", onClick:bulkReseller},
    {label:"Something else (Contact)", onClick:()=>openContact("General question from chatbot")}
  ]);
  const note = el("div",{class:"botf-footer-note"},
    `Auto replies only. If your issue isn't listed, we'll send you to our Contact page.`
  );
  chatBody.append(note);
  scrollToBottom();
}

// ---- 1) Quick Quote ----
const quoteState = { width:48, height:24, qty:1, material:"13oz Vinyl" };

function quoteStart(){
  addMsg("Great — I'll get you a fast estimate. Enter **Width** and **Height** in inches, select a material, and set quantity.");
  renderQuoteForm();
}

function renderQuoteForm(){
  const form = el("div",{class:"botf-section"});

  // Size inputs
  const sizeLabel = el("div",{style:{fontWeight:"600", marginBottom:"6px", fontSize:"13px"}}, "Banner Size (inches):");
  const row1 = el("div",{class:"botf-row"},
    el("input",{type:"number", min:"1", value:quoteState.width, "aria-label":"Width (in)", placeholder:"Width"}),
    el("span",{style:{alignSelf:"center", padding:"0 4px", fontSize:"14px", color:"#666"}}, "×"),
    el("input",{type:"number", min:"1", value:quoteState.height, "aria-label":"Height (in)", placeholder:"Height"})
  );

  // Material and quantity
  const matLabel = el("div",{style:{fontWeight:"600", marginBottom:"6px", fontSize:"13px", marginTop:"12px"}}, "Material & Quantity:");
  const row2 = el("div",{class:"botf-row"},
    el("select",{style:{flex:"2"}},
      ...Object.keys(CONFIG.pricingSqft).map(m=> el("option",{value:m, selected:m===quoteState.material}, m))
    ),
    el("input",{type:"number", min:"1", value:quoteState.qty, "aria-label":"Quantity", placeholder:"Qty", style:{flex:"1"}})
  );

  const calcBtn = el("button",{class:"botf-cta", style:{marginTop:"12px", width:"100%"}, onClick:()=>{
    const [wEl, , hEl] = row1.children; // Skip the × symbol
    const [matEl,qEl] = row2.children;
    quoteState.width = Math.max(1, toNum(wEl.value));
    quoteState.height = Math.max(1, toNum(hEl.value));
    quoteState.material = matEl.value;
    quoteState.qty = Math.max(1, toInt(qEl.value));
    renderQuoteResult();
  }}, "Calculate Price");

  form.append(sizeLabel, row1, matLabel, row2, calcBtn);
  addMsg(form);
}

function renderQuoteResult(){
  const sqft = (quoteState.width * quoteState.height) / 144;
  const rate = CONFIG.pricingSqft[quoteState.material] || 0;
  const subtotal = sqft * rate * quoteState.qty;
  const tax = subtotal * CONFIG.taxRate;
  const total = subtotal + tax;

  const result = el("div",{class:"botf-section"},
    el("div",{}, `📐 Size: ${quoteState.width}" × ${quoteState.height}"  •  ${sqft.toFixed(2)} sq ft`),
    el("div",{}, `🔢 Quantity: ${quoteState.qty}`),
    el("div",{}, `🎨 Material: ${quoteState.material} @ ${money(rate)}/sq ft`),
    el("hr"),
    el("div",{}, `Banner subtotal: ${money(subtotal)}`),
    el("div",{}, `Tax (${(CONFIG.taxRate*100).toFixed(0)}%): ${money(tax)}`),
    el("div", {style:{fontWeight:"700", marginTop:"4px"}}, `Total: ${money(total)}`),
    el("div",{class:"botf-mini"}, `Includes ${CONFIG.productionCopy}${CONFIG.grommetsIncluded ? " • Grommets every 24\"" : ""}`)
  );

  const actions = el("div",{class:"botf-buttons"},
    el("button",{class:"botf-btn",onClick:()=> window.open(CONFIG.designUrl,"_blank","noopener")}, "Start My Design"),
    el("button",{class:"botf-btn",onClick:()=> openContact(`Quote request: ${quoteState.width}x${quoteState.height}, qty ${quoteState.qty}, ${quoteState.material}, est ${money(total)}`)}, "Send to Contact"),
    CONFIG.smsNumber ? el("a",{class:"botf-btn", href:smsHref(`Quote for ${quoteState.width}x${quoteState.height}, qty ${quoteState.qty}, ${quoteState.material}`)}, "Text Us") : null,
    el("button",{class:"botf-btn",onClick:welcome}, "Start Over")
  );

  addMsg(result);
  chatBody.append(actions);
  scrollToBottom();
}

// ---- 2) Design Help ----
function designHelp(){
  const box = el("div",{class:"botf-section"},
    el("div",{}, "We'll prep your file for free and send a proof for approval."),
    el("ul", {class:"botf-mini"},
      el("li",{}, "Best formats: PDF/AI (fonts outlined). Also fine: JPG/PNG at full size 150–300 dpi."),
      el("li",{}, "Grommets every 24\" included. Pole pockets 1–4\" available."),
      el("li",{}, "Use (indoor/outdoor) helps us pick the best material.")
    ),
    el("div",{class:"botf-buttons", style:{marginTop:"8px"}},
      el("button",{class:"botf-btn", onClick:()=> window.open(CONFIG.designUrl,"_blank","noopener")}, "Open Design Tool"),
      el("a",{class:"botf-btn", href:`mailto:${CONFIG.supportEmail}?subject=Design%20Help%20Request&body=Size:%0D%0AFinish:%0D%0AUse:%0D%0ALink%20to%20artwork:%0D%0A`}, "Email Files"),
      el("button",{class:"botf-btn", onClick:()=> openContact("Design help from chatbot")}, "Contact Support"),
      el("button",{class:"botf-btn", onClick:welcome}, "Back")
    )
  );
  addMsg(box);
}

// ---- 3) Order Status ----
function orderStatus(){
  const form = el("div",{class:"botf-section"});

  const intro = el("div",{style:{marginBottom:"12px", fontSize:"14px"}}, "Enter your details and we'll update you quickly:");

  const orderLabel = el("div",{style:{fontWeight:"600", marginBottom:"6px", fontSize:"13px"}}, "Order Number (optional):");
  const order = el("input",{type:"text", placeholder:"Order # (or leave blank)", "aria-label":"Order number", style:{marginBottom:"8px"}});

  const emailLabel = el("div",{style:{fontWeight:"600", marginBottom:"6px", fontSize:"13px"}}, "Email Address:");
  const email = el("input",{type:"email", placeholder:"Email used at checkout", "aria-label":"Email", style:{marginBottom:"12px"}});

  const btn = el("button",{class:"botf-cta", style:{width:"100%"}, onClick:()=>{
    if (!email.value.trim()) {
      alert("Please enter your email address");
      return;
    }
    addMsg(`Thanks! We'll check your order and send an update to ${email.value} shortly.`);
    openContact(`Order status request — Order#: ${order.value || "(n/a)"} — Email: ${email.value}`);
  }}, "Request Status");

  const note = el("div",{class:"botf-mini", style:{marginTop:"8px"}}, "We ship Next-Day Air after 24-hour production.");

  form.append(intro, orderLabel, order, emailLabel, email, btn, note);
  addMsg(form);
}

// ---- 4) Payment / Checkout ----
function paymentHelp(){
  addMsg("Choose a payment path:");
  addButtons([
    {label:"PayPal issue", onClick:()=> {
      addMsg("We can send a PayPal invoice or a direct checkout link.");
      addButtons([
        {label:"Send PayPal Invoice", onClick:()=> openContact("PayPal invoice request from chatbot")},
        {label:"Direct Checkout Link", onClick:()=> openContact("Direct checkout link request from chatbot")},
        {label:"Back", onClick:welcome}
      ]);
    }},
    {label:"Payment declined", onClick:()=> {
      addMsg("No worries — we can switch to invoice or phone payment.");
      addButtons([
        {label:"Request Invoice", onClick:()=> openContact("Invoice request (card declined) from chatbot")},
        {label:"Back", onClick:welcome}
      ]);
    }},
    {label:"Need invoice / PO", onClick:()=> openContact("PO/Invoice request from chatbot")},
    {label:"Back", onClick:welcome}
  ]);
}

// ---- 5) Bulk / Reseller ----
function bulkReseller(){
  const form = el("div",{class:"botf-section"});

  const intro = el("div",{style:{marginBottom:"12px", fontSize:"14px"}}, "Tell us what you need and we'll send volume pricing:");

  const sizes = el("input",{type:"text", placeholder:"Sizes (e.g., 48x24, 96x30…)", style:{marginBottom:"8px"}});
  const qtys = el("input",{type:"text", placeholder:"Quantities per size", style:{marginBottom:"8px"}});
  const mats = el("input",{type:"text", placeholder:"Materials (13oz, 15oz, 18oz, Mesh)", style:{marginBottom:"8px"}});
  const cadence = el("input",{type:"text", placeholder:"Delivery cadence / deadlines", style:{marginBottom:"12px"}});

  const btn = el("button",{class:"botf-cta", style:{width:"100%"}, onClick:()=>{
    const msg = `Bulk/Reseller quote:
Sizes: ${sizes.value || "Not specified"}
Quantities: ${qtys.value || "Not specified"}
Materials: ${mats.value || "Not specified"}
Cadence: ${cadence.value || "Not specified"}`;
    addMsg("Got it — we'll send volume pricing and lead times asap.");
    openContact(msg);
  }}, "Send Details");

  form.append(intro, sizes, qtys, mats, cadence, btn);
  addMsg(form);
}

// Kickoff if user clicks the bubble
})();
    </script>
  </body>
</html>
